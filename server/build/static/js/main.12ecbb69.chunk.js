(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{65:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n.n(s),a=n(12),i=n.n(a),o=n(17),c=n(7),l=n(8),h=n(15),p=n(14),d=n(36),u=n.n(d),j=n(73),b=n(79),f=n(6),v=n.n(f),g=(n(64),n(65),n(72));var m=function(e){console.log("My layers",Date.now());var t=Object(g.a)();return Object.values(e.people).map((function(n){e.peopleState[n.name].isShown&&n.getLayerGroup().addTo(t)})),null},O=n(1);delete v.a.Icon.Default.prototype._getIconUrl,v.a.Icon.Default.mergeOptions({iconUrl:"/static/images/marker-icon.png",iconRetinaUrl:"/static/images/marker-icon-2x.png",shadowUrl:"/static/images/marker-shadow.png"});var y=[36.08851338894426,10.80333970970808];var x=function(e){return console.log("start render Map",Date.now()),Object(O.jsxs)(j.a,{center:y,zoom:7.8,scrollWheelZoom:!1,children:[Object(O.jsx)(b.a,{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.jpg"}),Object(O.jsx)(m,{people:e.people,peopleState:e.peopleState})]})},D=n(75),k=n(76),w=n(37);n(67);function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"black",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black";return v.a.divIcon({html:'<svg \n height="24"\n  viewBox="0 0 512 512"\n   width="24"\n   preserveAspectRatio="none"\n    xmlns="http://www.w3.org/2000/svg">\n    <g>\n    <path d="m90.997 364.003h119.998v-216.821l-132.375 193.347c-6.805 9.94.33 23.474 12.377 23.474z" fill="'+e+'"> </path>\n    <path d="m488.49 391.572h-224.999v-27.569h149.997c8.28 0 15-6.72 15-15 0-45.429-9.19-87.148-27.32-124.008-29.039-59.049-81.459-104.268-137.677-127.378v-82.608c0-10.61-10.75-17.85-20.55-13.93-.05.02-.09.04-.14.05-4.03 1.66-89.908 36.969-90.008 37.009-12.31 5.06-12.39 22.51-.13 27.69l80.829 34.129v291.615h-209.994c-9.217 0-16.388 8.233-14.803 17.86 16.103 105.627 13.38 87.765 13.693 89.818 1.112 7.331 7.414 12.75 14.83 12.75h335.291c51.636 0 97.805-29.107 120.101-73.312.075.006.152.007.227.013 4.44-8.93 7.89-18.39 10.24-28.21 2.365-9.88-4.925-18.919-14.587-18.919zm-224.999-248.235c40.059 49.959 40.119 120.338 0 170.367z" fill="'+t+'" ></path>\n    </g></svg>',className:"dummy",iconSize:[0,0],iconAnchor:[12,12]})}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t?1===t?e.substring(0,4)+"-"+e.substring(4,6)+"-"+e.substring(6,8):void 0:e.substring(6,8)+"/"+e.substring(4,6)+"/"+e.substring(0,4)}function C(e){return e.substr(0,2)+":"+e.substr(2,2)}var M=function(){function e(){Object(c.a)(this,e),this.current=0,this.names=["#00ffff","#ff00ff","#ffff00","#ffffff","#ffb6c1","#ffa500","#00ff00","#bdb76b","#00008b","#008b8b","#a9a9a9","#006400","#9932cc","#e9967a","#add8e6","#e0ffff","#90ee90","#d3d3d3","#808000","#ffc0cb","#800080","#00ff00","#0000ff","#f0ffff","#f5f5dc","#8b008b","#556b2f","#ff8c00","#ffd700","#008000","#4b0082","#f0e68c","#ffffe0","#000080","#800080","#c0c0c0"]}return Object(l.a)(e,[{key:"getNext",value:function(){var e=this.names[this.current];return this.current++,this.current%=this.names.length,e}},{key:"shadeHexColor",value:function(e,t){var n=parseInt(e.slice(1),16),s=t<0?0:255,r=t<0?-1*t:t,a=n>>16,i=n>>8&255,o=255&n;return"#"+(16777216+65536*(Math.round((s-a)*r)+a)+256*(Math.round((s-i)*r)+i)+(Math.round((s-o)*r)+o)).toString(16).slice(1)}}]),e}();var G=function(){function e(t){Object(c.a)(this,e),this.lt=t.lt,this.lg=t.lg,this.date=t.da,this.time=t.ti,this.id=t.id}return Object(l.a)(e,[{key:"getMarker",value:function(e,t,n){return v.a.marker([this.lt,this.lg],{icon:e?n[1]:n[0],riseOnHover:!0}).bindPopup(function(e,t){if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])return'<p style="text-align:center;">'+t+"<br>("+e.lt+" , "+e.lg+")<br>"+P(e.date)+" at "+C(e.time)+"</p>"}(this,t))}}]),e}(),I=function(){function e(t){Object(c.a)(this,e),this.polylines=[],this.name="",this.positions=[],this.markers=[],this.problems=[],this.layerGroup=v.a.layerGroup(),this.name=t}return Object(l.a)(e,[{key:"update",value:function(e){var t,n=null,s=[];if(this.markers=[],this.polylines=[],this.problems=[],e.isShown){var r,a=Object(o.a)(this.positions);try{for(a.s();!(r=a.n()).done;)if(t=r.value,this.checkDate(t,e)){var i=!1;n&&this.checkProblem(t,n)&&(this.insertPolyline(s,t),s=[[n.lt,n.lg],[t.lt,t.lg]],this.insertPolyline(s,t,"b",!0,n),s=[],i=!0,this.problems.push([t,n])),s.push([t.lt,t.lg]),this.markers.push(t.getMarker(i,this.name,this.icons)),n=t}}catch(c){a.e(c)}finally{a.f()}this.insertPolyline(s,t,"c"),this.layerGroup=v.a.layerGroup(this.polylines.concat(this.markers))}}},{key:"getLayerGroup",value:function(){return this.layerGroup}},{key:"checkProblem",value:function(e,t){var n=new Date(P(e.date,1)+" "+C(e.time)),s=new Date(P(t.date,1)+" "+C(t.time))-n;return(s=s/1e3/60)>120}},{key:"insertPolyline",value:function(e,t){var n=this,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!(e.length<=1)){var a,i,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return t?n.name+" "+P(s.date)+" "+C(s.time)+" => "+P(e.date)+" "+C(e.time):'<p style="text-align:center;">this.name</p>'};s?(a={color:"red",dashArray:"20,20"},i=o(t,s,r)):(a={color:this.color},i=o(t)),this.polylines.push(v.a.polyline(e,a).bindPopup(i))}}},{key:"checkDate",value:function(e,t){var n=new Date(P(e.date,1));return t.startDate<=n&&n<=t.endDate}}]),e}(),z=n(78),B=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{style:{display:"flex"},children:[Object(O.jsx)(z.a.Check,{type:"switch",id:"custom-switch",checked:this.props.isChecked,onChange:function(){e.props.togglePerson(e.props.name)}}),Object(O.jsx)("span",{children:this.props.name})]}),Object(O.jsx)("hr",{style:{width:"25%"}}),Object(O.jsxs)("div",{style:{marginTop:"5px",marginBottom:"10px"},children:[Object(O.jsx)("strong",{children:"Date Filter:"}),Object(O.jsx)("br",{}),Object(O.jsxs)("span",{children:[" from:",Object(O.jsx)("input",{type:"date",onChange:function(t){return e.props.setDate(e.props.name,0,t.target.value)},value:this.props.startDate.yyyymmdd()})]}),Object(O.jsxs)("span",{style:{marginLeft:"10px"},children:[" to:",Object(O.jsx)("input",{type:"date",onChange:function(t){return e.props.setDate(e.props.name,1,t.target.value)},value:this.props.endDate.yyyymmdd()})]})]})]})}}]),n}(s.Component),A=B,H=n(77),U=n(74);var L=function(e){var t=e.problems.map((function(e,t){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:t+1}),Object(O.jsxs)("td",{children:[P(e[0].date)," ",C(e[0].time)]}),Object(O.jsxs)("td",{children:["(",e[0].lt," , ",e[0].lg,")"]}),Object(O.jsxs)("td",{children:[P(e[1].date)," ",C(e[1].time)]}),Object(O.jsxs)("td",{children:["(",e[1].lt," , ",e[1].lg,")"]})]},e[0].id+e[1].id)}));return Object(O.jsxs)(H.a,{children:[Object(O.jsxs)(H.a.Item,{eventKey:"0",children:[Object(O.jsxs)(H.a.Header,{children:["Infractions (",t.length,")"]}),Object(O.jsx)(H.a.Body,{children:Object(O.jsxs)(U.a,{striped:!0,bordered:!0,hover:!0,children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"#"}),Object(O.jsx)("th",{children:"time 1"}),Object(O.jsx)("th",{children:"position 1"}),Object(O.jsx)("th",{children:"time 2"}),Object(O.jsx)("th",{children:"position 2"})]})}),Object(O.jsx)("tbody",{children:t})]})})]}),Object(O.jsxs)(H.a.Item,{eventKey:"1",children:[Object(O.jsx)(H.a.Header,{children:"SOS"}),Object(O.jsx)(H.a.Body,{children:"abc"})]})]})},N=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(O.jsxs)("div",{style:{padding:"10px 3px",border:"2px #7e8182 solid",marginTop:"4px"},children:[Object(O.jsx)("div",{children:Object(O.jsx)(A,{isChecked:this.props.checked,startDate:this.props.startDate,endDate:this.props.endDate,name:this.props.name,togglePerson:this.props.togglePerson,setDate:this.props.setDate})}),Object(O.jsx)(L,{problems:this.props.problems})]})}}]),n}(s.Component),T=N,F=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props.peopleState,n=this.props.problems;return Object(O.jsx)("div",{style:{overflowY:"scroll",height:"100vh"},children:Object.keys(t).map((function(s){return Object(O.jsx)(T,{name:s,checked:t[s].isShown,startDate:t[s].startDate,endDate:t[s].endDate,togglePerson:e.props.togglePerson,setDate:e.props.setDate,problems:n[s]},s)}))})}}]),n}(s.Component),J=F;Date.prototype.yyyymmdd=function(){var e=this.getMonth()+1,t=this.getDate();return[this.getFullYear(),(e>9?"":"0")+e,(t>9?"":"0")+t].join("-")};var K=[],R=[],Y=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={peopleState:[]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log("start ComponentDidMount",Date.now()),u.a.get("/api").then((function(t){console.log("start axios",Date.now());var n,s=new M,r=Object(o.a)(t.data);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(void 0===R[a.na]){R[a.na]=new I(a.na);var i=s.getNext();R[a.na].icons=[S(i),S(i,"red")],R[a.na].color=i,K[a.na]={isShown:!0,startDate:new Date("2021-01-01"),endDate:new Date("2022-01-01")}}R[a.na].positions.push(new G(a))}}catch(c){r.e(c)}finally{r.f()}Object.values(R).map((function(e){return e.update({isShown:!0,startDate:new Date("2021-01-01"),endDate:new Date("2022-01-01")})})),e.setState({peopleState:K})}))}},{key:"togglePerson",value:function(e){console.log(e);var t=Object.assign({},this.state.peopleState);t[e].isShown=!t[e].isShown,R[e].layerGroup.remove(),this.setState({peopleState:t})}},{key:"setDate",value:function(e,t,n){var s=Object.assign({},this.state.peopleState);0===t?s[e].startDate=new Date(n):s[e].endDate=new Date(n),R[e].layerGroup.remove(),R[e].update(s[e]),this.setState({layerGroups:s})}},{key:"render",value:function(){console.log("start render",Date.now());var e=[];return Object.values(R).map((function(t){e[t.name]=t.problems})),Object(O.jsx)("div",{children:Object(O.jsx)(D.a,{fluid:!0,children:Object(O.jsxs)(k.a,{children:[Object(O.jsx)(w.a,{lg:8,md:12,children:Object(O.jsx)(x,{people:R,peopleState:this.state.peopleState})}),Object(O.jsx)(w.a,{lg:4,md:12,children:Object(O.jsx)(J,{peopleState:K,togglePerson:this.togglePerson.bind(this),setDate:this.setDate.bind(this),problems:e})})]})})})}}]),n}(s.Component),E=Y;i.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(E,{})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.12ecbb69.chunk.js.map