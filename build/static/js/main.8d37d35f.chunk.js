(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{66:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n.n(s),i=n(14),a=n.n(i),o=n(19),c=n(7),l=n(8),h=n(13),p=n(12),d=n(39),j=n.n(d),u=n(73),b=n(83),f=n(6),O=n.n(f),m=(n(65),n(66),n(1));delete O.a.Icon.Default.prototype._getIconUrl,O.a.Icon.Default.mergeOptions({iconUrl:"/static/images/marker-icon.png",iconRetinaUrl:"/static/images/marker-icon-2x.png",shadowUrl:"/static/images/marker-shadow.png"});var v=[36.08851338894426,10.80333970970808],g=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return console.log("start render Map",Date.now()),Object(m.jsxs)(u.a,{center:v,zoom:7.8,children:[Object(m.jsx)(b.a,{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.jpg"}),Object.values(this.props.people).map((function(t){return e.props.peopleState[t.name].isShown?t.getLayerGroup():null}))]})}}]),n}(s.Component),x=g,y=n(79),D=n(80);n(68);function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"black",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black";return O.a.divIcon({html:'<svg \n height="24"\n  viewBox="0 0 512 512"\n   width="24"\n   preserveAspectRatio="none"\n    xmlns="http://www.w3.org/2000/svg">\n    <g>\n    <path d="m90.997 364.003h119.998v-216.821l-132.375 193.347c-6.805 9.94.33 23.474 12.377 23.474z" fill="'+e+'"> </path>\n    <path d="m488.49 391.572h-224.999v-27.569h149.997c8.28 0 15-6.72 15-15 0-45.429-9.19-87.148-27.32-124.008-29.039-59.049-81.459-104.268-137.677-127.378v-82.608c0-10.61-10.75-17.85-20.55-13.93-.05.02-.09.04-.14.05-4.03 1.66-89.908 36.969-90.008 37.009-12.31 5.06-12.39 22.51-.13 27.69l80.829 34.129v291.615h-209.994c-9.217 0-16.388 8.233-14.803 17.86 16.103 105.627 13.38 87.765 13.693 89.818 1.112 7.331 7.414 12.75 14.83 12.75h335.291c51.636 0 97.805-29.107 120.101-73.312.075.006.152.007.227.013 4.44-8.93 7.89-18.39 10.24-28.21 2.365-9.88-4.925-18.919-14.587-18.919zm-224.999-248.235c40.059 49.959 40.119 120.338 0 170.367z" fill="'+t+'" ></path>\n    </g></svg>',className:"dummy",iconSize:[0,0],iconAnchor:[12,12]})}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t?1===t?e.substring(0,4)+"-"+e.substring(4,6)+"-"+e.substring(6,8):void 0:e.substring(6,8)+"/"+e.substring(4,6)+"/"+e.substring(0,4)}function S(e){return e.substr(0,2)+":"+e.substr(2,2)}var P=function(){function e(){Object(c.a)(this,e),this.current=0,this.names=["#00ffff","#ff00ff","#ffff00","#ffffff","#00008b","#008b8b","#a9a9a9","#006400","#9932cc","#e9967a","#add8e6","#e0ffff","#90ee90","#d3d3d3","#808000","#ffa500","#ffc0cb","#800080","#00ff00","#0000ff","#f0ffff","#f5f5dc","#bdb76b","#8b008b","#556b2f","#ff8c00","#ffd700","#008000","#4b0082","#f0e68c","#ffb6c1","#ffffe0","#00ff00","#000080","#800080","#c0c0c0"]}return Object(l.a)(e,[{key:"getNext",value:function(){var e=this.names[this.current];return this.current++,this.current%=this.names.length,e}},{key:"shadeHexColor",value:function(e,t){var n=parseInt(e.slice(1),16),s=t<0?0:255,r=t<0?-1*t:t,i=n>>16,a=n>>8&255,o=255&n;return"#"+(16777216+65536*(Math.round((s-i)*r)+i)+256*(Math.round((s-a)*r)+a)+(Math.round((s-o)*r)+o)).toString(16).slice(1)}}]),e}();var M=n(74),C=n(75),I=function(){function e(t){Object(c.a)(this,e),this.lt=t.lt,this.lg=t.lg,this.date=t.da,this.time=t.ti,this.id=t.id}return Object(l.a)(e,[{key:"getMarker",value:function(e,t,n){return Object(m.jsx)(M.a,{position:[this.lt,this.lg],icon:e?n[1]:n[0],riseOnHover:!0,children:Object(m.jsx)(C.a,{children:this.popupText(t)})},this.id+t)}},{key:"popupText",value:function(e){return Object(m.jsxs)("span",{children:[Object(m.jsx)("center",{children:e}),"(",this.lt," , ",this.lg,") ",Object(m.jsx)("br",{}),"at ",w(this.date)," ",S(this.time)]})}}]),e}(),z=n(76),B=n(77),A=function(){function e(t){Object(c.a)(this,e),this.polylines=[],this.name="",this.positions=[],this.markers=[],this.problems=[],this.oldMarkers=[],this.oldPolylines=[],this.name=t}return Object(l.a)(e,[{key:"update",value:function(e){if(!1===e.isShown)return this.oldMarkers=this.markers,this.oldPolylines=this.polylines,this.markers=[],void(this.polylines=[]);if(!0===e.isShown&&0!==this.oldMarkers.length)return this.markers=this.oldMarkers,void(this.polylines=this.oldPolylines);var t,n=null,s=[];if(this.markers=[],this.polylines=[],this.problems=[],e.isShown){var r,i=Object(o.a)(this.positions);try{for(i.s();!(r=i.n()).done;)if(t=r.value,this.checkDate(t,e)){var a=!1;n&&this.checkProblem(t,n)&&(this.insertPolyline(s,t),s=[[n.lt,n.lg],[t.lt,t.lg]],this.insertPolyline(s,t,"b",!0,n),s=[],a=!0,this.problems.push([t,n])),s.push([t.lt,t.lg]),this.markers.push(t.getMarker(a,this.name,this.icons)),n=t}}catch(c){i.e(c)}finally{i.f()}this.insertPolyline(s,t,"c")}}},{key:"getLayerGroup",value:function(){return Object(m.jsxs)(z.a,{children:[this.markers,this.polylines]},this.name)}},{key:"checkProblem",value:function(e,t){var n=new Date(w(e.date,1)+" "+S(e.time)),s=new Date(w(t.date,1)+" "+S(t.time))-n;return(s=s/1e3/60)>120}},{key:"insertPolyline",value:function(e,t){var n,s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"a",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;e.length<=1||(i?(n={color:"red",dashArray:"20,20"},s=Object(m.jsxs)("span",{children:[Object(m.jsx)("center",{children:this.name}),"(",t.lt," , ",t.lg," ) => (",a.lt," , ",a.lg,")",Object(m.jsx)("br",{}),"("+w(t.date)+" , "+S(t.time)+") => ("+w(a.date)+" , "+S(a.time)+")"]})):(n={color:this.color},s=Object(m.jsx)("center",{children:this.name})),this.polylines.push(Object(m.jsx)(B.a,{pathOptions:n,positions:e,children:Object(m.jsx)(C.a,{children:s})},t.id+r)))}},{key:"checkDate",value:function(e,t){var n=new Date(w(e.date,1));return t.startDate<=n&&n<=t.endDate}}]),e}(),H=n(82),T=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{style:{display:"flex"},children:[Object(m.jsx)(H.a.Check,{type:"switch",id:"custom-switch",checked:this.props.isChecked,onChange:function(){e.props.togglePerson(e.props.name)}}),Object(m.jsx)("span",{children:this.props.name})]}),Object(m.jsx)("hr",{style:{width:"25%"}}),Object(m.jsxs)("div",{style:{marginTop:"5px",marginBottom:"10px"},children:[Object(m.jsx)("strong",{children:"Date Filter:"}),Object(m.jsx)("br",{}),Object(m.jsxs)("span",{children:[" from:",Object(m.jsx)("input",{type:"date",onChange:function(t){return e.props.setDate(e.props.name,0,t.target.value)},value:this.props.startDate.yyyymmdd()})]}),Object(m.jsxs)("span",{style:{marginLeft:"10px"},children:[" to:",Object(m.jsx)("input",{type:"date",onChange:function(t){return e.props.setDate(e.props.name,1,t.target.value)},value:this.props.endDate.yyyymmdd()})]})]})]})}}]),n}(s.Component),U=T,G=n(81),L=n(78);var N=function(e){var t=e.problems.map((function(e,t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:t+1}),Object(m.jsxs)("td",{children:[w(e[0].date)," ",S(e[0].time)]}),Object(m.jsxs)("td",{children:["(",e[0].lt," , ",e[0].lg,")"]}),Object(m.jsxs)("td",{children:[w(e[1].date)," ",S(e[1].time)]}),Object(m.jsxs)("td",{children:["(",e[1].lt," , ",e[1].lg,")"]})]},e[0].id+e[1].id)}));return Object(m.jsxs)(G.a,{children:[Object(m.jsxs)(G.a.Item,{eventKey:"0",children:[Object(m.jsxs)(G.a.Header,{children:["Infractions (",t.length,")"]}),Object(m.jsx)(G.a.Body,{children:Object(m.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"#"}),Object(m.jsx)("th",{children:"time 1"}),Object(m.jsx)("th",{children:"position 1"}),Object(m.jsx)("th",{children:"time 2"}),Object(m.jsx)("th",{children:"position 2"})]})}),Object(m.jsx)("tbody",{children:t})]})})]}),Object(m.jsxs)(G.a.Item,{eventKey:"1",children:[Object(m.jsx)(G.a.Header,{children:"SOS"}),Object(m.jsx)(G.a.Body,{children:"abc"})]})]})},F=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("div",{style:{padding:"10px 3px",border:"2px #7e8182 solid",marginTop:"4px"},children:[Object(m.jsx)("div",{children:Object(m.jsx)(U,{isChecked:this.props.checked,startDate:this.props.startDate,endDate:this.props.endDate,name:this.props.name,togglePerson:this.props.togglePerson,setDate:this.props.setDate})}),Object(m.jsx)(N,{problems:this.props.problems})]})}}]),n}(s.Component),J=F,K=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props.peopleState,n=this.props.problems;return Object(m.jsx)("div",{style:{overflowY:"scroll",height:"70vh"},children:Object.keys(t).map((function(s){return Object(m.jsx)(J,{name:s,checked:t[s].isShown,startDate:t[s].startDate,endDate:t[s].endDate,togglePerson:e.props.togglePerson,setDate:e.props.setDate,problems:n[s]},s)}))})}}]),n}(s.Component),R=K;Date.prototype.yyyymmdd=function(){var e=this.getMonth()+1,t=this.getDate();return[this.getFullYear(),(e>9?"":"0")+e,(t>9?"":"0")+t].join("-")};var Y=[],E=[],_=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={peopleState:[]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log("start ComponentDidMount",Date.now()),j.a.get("/api").then((function(t){console.log("start axios",Date.now());var n,s=new P,r=Object(o.a)(t.data);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(void 0===E[i.na]){E[i.na]=new A(i.na);var a=s.getNext();E[i.na].icons=[k(a),k(a,"red")],E[i.na].color=a,Y[i.na]={isShown:!0,startDate:new Date("2021-01-01"),endDate:new Date("2022-01-01")}}E[i.na].positions.push(new I(i))}}catch(c){r.e(c)}finally{r.f()}console.log(E),Object.values(E).map((function(e){return e.update({isShown:!0,startDate:new Date("2021-01-01"),endDate:new Date("2022-01-01")})})),e.setState({peopleState:Y})}))}},{key:"togglePerson",value:function(e){console.log(e);var t=Object.assign({},this.state.peopleState);t[e].isShown=!t[e].isShown,E[e].update(t[e]),this.setState({peopleState:t})}},{key:"setDate",value:function(e,t,n){var s=Object.assign({},this.state.peopleState);0===t?s[e].startDate=new Date(n):s[e].endDate=new Date(n),E[e].update(s[e]),this.setState({layerGroups:s})}},{key:"render",value:function(){console.log("start render",Date.now());var e=[];return Object.values(E).map((function(t){e[t.name]=t.problems})),Object(m.jsx)("div",{children:Object(m.jsxs)(y.a,{children:[Object(m.jsx)(D.a,{children:Object(m.jsx)(x,{people:E,peopleState:this.state.peopleState})}),Object(m.jsx)(D.a,{style:{padding:"0!important"},children:Object(m.jsx)(R,{peopleState:Y,togglePerson:this.togglePerson.bind(this),setDate:this.setDate.bind(this),problems:e})})]})})}}]),n}(s.Component),q=_;a.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(q,{})}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.8d37d35f.chunk.js.map